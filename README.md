<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âç∑ÁÉüËÆ¢Ë¥≠Êñ∞Ê®°Âºè - ‰ª∑‰ΩçÊÆµËá™ÈÄâ</title>
    <style>
        /* Âü∫Á°ÄÊ†∑Âºè */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        /* Â§¥ÈÉ®Ê†∑Âºè */
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
            color: white;
            position: relative;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        /* ËØ≠Èü≥ÊéßÂà∂Âå∫Âüü */
        .voice-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        
        .voice-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .voice-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .voice-btn.active {
            background: #4caf50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        /* ËøõÂ∫¶Êù°Ê†∑Âºè */
        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            margin: 20px 0 0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #ffeb3b;
            width: 10%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* ÊïÖ‰∫ãÂÜÖÂÆπÊ†∑Âºè */
        .story-content {
            padding: 30px;
            position: relative;
        }
        
        .story-text {
            font-size: 1.1rem;
            margin-bottom: 25px;
            line-height: 1.7;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
        }
        
        /* ÈÄâÊã©ÊåâÈíÆÊ†∑Âºè */
        .choices {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }
        
        .choice-btn {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: 500;
        }
        
        .choice-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }
        
        .choice-btn.red {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            box-shadow: 0 4px 10px rgba(244, 67, 54, 0.3);
        }
        
        .choice-btn.red:hover {
            box-shadow: 0 6px 15px rgba(244, 67, 54, 0.4);
        }
        
        .choice-btn.blue {
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
            box-shadow: 0 4px 10px rgba(33, 150, 243, 0.3);
        }
        
        .choice-btn.blue:hover {
            box-shadow: 0 6px 15px rgba(33, 150, 243, 0.4);
        }
        
        /* Ê≠•È™§ËØ¥ÊòéÊ†∑Âºè */
        .steps {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            border-left: 5px solid #2196f3;
        }
        
        .step {
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 3px solid #4caf50;
            padding-top: 5px;
            padding-bottom: 5px;
        }
        
        .step-number {
            display: inline-block;
            background: #4caf50;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-weight: bold;
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .container {
                border-radius: 10px;
            }
            
            header {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .story-content {
                padding: 20px;
            }
            
            .choices {
                grid-template-columns: 1fr;
            }
            
            .choice-btn {
                padding: 15px;
                font-size: 1rem;
            }
            
            .voice-controls {
                position: static;
                justify-content: center;
                margin-top: 15px;
            }
        }
        
        /* Âä®ÁîªÊïàÊûú */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        /* Âº∫Ë∞ÉÊñáÊú¨ */
        .highlight {
            background: rgba(33, 150, 243, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .quote {
            font-style: italic;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #4caf50;
            margin: 15px 0;
        }
        
        /* ËØ≠Èü≥Êí≠ÊîæÊåáÁ§∫Âô® */
        .speech-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }
        
        .speech-indicator.active {
            display: flex;
        }
        
        .pulse {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4caf50;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(0.8);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(0.8);
                opacity: 0.7;
            }
        }
        
        /* Ëá™Âä®Êí≠ÊîæÂºÄÂÖ≥ */
        .auto-play-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            color: #bbbbbb;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #4caf50;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Âç∑ÁÉüËÆ¢Ë¥≠Êñ∞Ê®°Âºè - ‰ª∑‰ΩçÊÆµËá™ÈÄâ</h1>
            <p class="subtitle">Êô∫ËÉΩËÆ¢Ë¥ßÔºåÁúÅÊó∂ÁúÅÂäõ</p>
            
            <div class="voice-controls">
                <button class="voice-btn" id="playVoice" title="Êí≠ÊîæËØ≠Èü≥">
                    üîä
                </button>
                <button class="voice-btn" id="stopVoice" title="ÂÅúÊ≠¢ËØ≠Èü≥">
                    ‚èπÔ∏è
                </button>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress"></div>
            </div>
        </header>
        
        <main class="story-content fade-in" id="story-content">
            <!-- ÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
        </main>
    </div>
    
    <div class="speech-indicator" id="speechIndicator">
        <div class="pulse"></div>
        <span>Ê≠£Âú®ÊúóËØª‰∏≠...</span>
    </div>

    <script>
        // ËØ≠Èü≥ÂêàÊàêÂØπË±°
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        let autoPlayEnabled = false;

        // ÊïÖ‰∫ãÂú∫ÊôØÊï∞ÊçÆ
        const scenes = {
            1: {
                title: "Êñ∞ÁöÑËÆ¢Ë¥ßÊñπÂºèÊù•‰∫ÜÔºÅ",
                content: `
                    <div class="story-text">
                        <p>ÂÆ¢Êà∑ÁªèÁêÜÂ∞èÊùéÂÖ¥ÂÜ≤ÂÜ≤Ëµ∞ËøõÂ∫óÈáåÂëäËØâ‰Ω†Ôºö</p>
                        <div class="quote">"ÂàòËÄÅÊùøÔºåÂ•ΩÊ∂àÊÅØÔºÅËÆ¢Ë¥ßÁ≥ªÁªüÂçáÁ∫ß‰∫ÜÔºåÁé∞Âú®ÂèØ‰ª•Êåâ‰ª∑‰ΩçÊÆµËá™ÈÄâÔºåÊìç‰ΩúÁâπÂà´ÁÆÄÂçïÔºÅ"</div>
                        <p>Èù¢ÂØπËøô‰∏™Êñ∞ÂäüËÉΩÔºå‰Ω†‰ºöÔºö</p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn red" onclick="showScene(2)">
                            <span>üî¥</span> ‰∏çÁêÜ‰ºö (ÂøÉÊÉ≥:ÂçñÁÉüÂ§öÂπ¥Ëá™Â∑±‰ºöËÆ¢)
                        </button>
                        <button class="choice-btn green" onclick="showScene(3)">
                            <span>üü¢</span> Â≠¶‰π†Êñ∞ÊñπÊ≥ï
                        </button>
                    </div>
                `,
                speechText: "ÂÆ¢Êà∑ÁªèÁêÜÂ∞èÊùéÂÖ¥ÂÜ≤ÂÜ≤Ëµ∞ËøõÂ∫óÈáåÂëäËØâ‰Ω†ÔºöÂàòËÄÅÊùøÔºåÂ•ΩÊ∂àÊÅØÔºÅËÆ¢Ë¥ßÁ≥ªÁªüÂçáÁ∫ß‰∫ÜÔºåÁé∞Âú®ÂèØ‰ª•Êåâ‰ª∑‰ΩçÊÆµËá™ÈÄâÔºåÊìç‰ΩúÁâπÂà´ÁÆÄÂçïÔºÅÈù¢ÂØπËøô‰∏™Êñ∞ÂäüËÉΩÔºå‰Ω†‰ºöÈÄâÊã©‰∏çÁêÜ‰ºöËøòÊòØÂ≠¶‰π†Êñ∞ÊñπÊ≥ïÔºü",
                progress: 10
            },
            2: {
                title: "‰∏çÁêÜ‰ºöÊñ∞ÊñπÊ≥ï",
                content: `
                    <div class="story-text">
                        <p>‰Ω†Ëá™‰ø°Êª°Êª°Ôºö<span class="highlight">"ÂçñÁÉüËøô‰πàÂ§öÂπ¥ÔºåËÆ¢Ë¥ßËøòÁî®Â≠¶Ôºü"</span></p>
                        <p>Áõ¥Êé•ÊâìÂºÄËÆ¢Ë¥ßÁ≥ªÁªüÔºåÊåâÁªèÈ™åÂºÄÂßãËÆ¢Ë¥ß...</p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(4)">
                            ËøõÂÖ•‰º†ÁªüËÆ¢Ë¥ßÊ®°Âºè
                        </button>
                    </div>
                `,
                speechText: "‰Ω†Ëá™‰ø°Êª°Êª°Âú∞ËØ¥ÔºöÂçñÁÉüËøô‰πàÂ§öÂπ¥ÔºåËÆ¢Ë¥ßËøòÁî®Â≠¶ÔºüÁõ¥Êé•ÊâìÂºÄËÆ¢Ë¥ßÁ≥ªÁªüÔºåÊåâÁªèÈ™åÂºÄÂßãËÆ¢Ë¥ß„ÄÇ",
                progress: 20
            },
            3: {
                title: "Â≠¶‰π†Êñ∞ÊñπÊ≥ï",
                content: `
                    <div class="story-text">
                        <p>‰Ω†Â•ΩÂ•áÂú∞ÈóÆÔºö<span class="highlight">"‰ª∑‰ΩçÊÆµËá™ÈÄâÊòØ‰ªÄ‰πàÔºü"</span></p>
                        <p>Â∞èÁéãÁÉ≠ÊÉÖ‰ªãÁªçÔºö"Â∞±ÊòØÊääÂç∑ÁÉüÊåâ‰ª∑Ê†ºÂàÜÊàê12‰∏™Âå∫Èó¥ÔºåÂÉèÂéªÈ§êÈ¶ÜÁÇπËèú‰∏ÄÊ†∑ÁÆÄÂçïÂë¢ÔºÅ"</p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(5)">
                            ‰∫ÜËß£‰ª∑‰ΩçÊÆµËá™ÈÄâ
                        </button>
                    </div>
                `,
                speechText: "‰Ω†Â•ΩÂ•áÂú∞ÈóÆÔºö‰ª∑‰ΩçÊÆµËá™ÈÄâÊòØ‰ªÄ‰πàÔºüÂ∞èÁéãÁÉ≠ÊÉÖ‰ªãÁªçÔºöÂ∞±ÊòØÊääÂç∑ÁÉüÊåâ‰ª∑Ê†ºÂàÜÊàê12‰∏™Âå∫Èó¥ÔºåÂÉèÂéªÈ§êÈ¶ÜÁÇπËèú‰∏ÄÊ†∑ÁÆÄÂçïÂë¢ÔºÅ",
                progress: 30
            },
            4: {
                title: "‰º†ÁªüËÆ¢Ë¥ßÊ®°ÂºèÁöÑÂõ∞Â¢É",
                content: `
                    <div class="story-text">
                        <p>Èù¢ÂØπÂá†Áôæ‰∏™Âç∑ÁÉüÂíåÈõ™ËåÑÁÉüÂìÅËßÑÔºå‰Ω†‰∏Ä‰∏™‰∏™ÊµèËßà...</p>
                        <p>ÂèëÁé∞‰∏âÂàÜ‰πã‰∫åÈÉΩÊòØËá™Â∑±Ê°£‰ΩçËÆ¢‰∏ç‰∫ÜÁöÑÔºÅ</p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(8)">
                            ÁªßÁª≠Á°¨ÁùÄÂ§¥ÁöÆÊåëÈÄâ
                        </button>
                    </div>
                `,
                speechText: "Èù¢ÂØπÂá†Áôæ‰∏™Âç∑ÁÉüÂíåÈõ™ËåÑÁÉüÂìÅËßÑÔºå‰Ω†‰∏Ä‰∏™‰∏™ÊµèËßàÔºåÂèëÁé∞‰∏âÂàÜ‰πã‰∫åÈÉΩÊòØËá™Â∑±Ê°£‰ΩçËÆ¢‰∏ç‰∫ÜÁöÑÔºÅ",
                progress: 40
            },
            5: {
                title: "‰ª∑‰ΩçÊÆµËá™ÈÄâÊòØ‰ªÄ‰πà",
                content: `
                    <div class="story-text">
                        <p>Ê†πÊçÆÂê´Á®éÊâπÂèë‰ª∑ÔºåÂú®Ë°å‰∏ö"‰∫îÁ±ªÂÖ´Ê°£"Âü∫Á°Ä‰∏äÂ∞Ü‰∏ÄËá≥‰∫îÊ°£Âç∑ÁÉüÁªü‰∏ÄÂàíÂàÜ‰∏∫12‰∏™‰ª∑‰ΩçÊÆµ„ÄÇ</p>
                        <p>Èô§Êñ∞ÂìÅ„ÄÅÁ¥ß‰øèÁÉü„ÄÅÈõ™ËåÑÁÉü„ÄÅÂõΩ‰∫ßÊ∑∑ÂêàÂûãÂç∑ÁÉü„ÄÅËøõÂè£ÁÉü‰ª•Âèä‰∏Ä‰∫õÁâπÊÆäÂïÜÂìÅÂ§ñÔºå‰∏ÄËá≥‰∫îÊ°£ÊâÄÊúâÂç∑ÁÉüËßÑÊ†ºÂùáÁ∫≥ÂÖ•Êåâ‰ª∑‰ΩçÊÆµËá™ÈÄâÊäïÊîæ„ÄÇ</p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(6)">
                            ‰∏é‰º†ÁªüËÆ¢Ë¥ßÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü
                        </button>
                    </div>
                `,
                speechText: "Ê†πÊçÆÂê´Á®éÊâπÂèë‰ª∑ÔºåÂú®Ë°å‰∏ö‰∫îÁ±ªÂÖ´Ê°£Âü∫Á°Ä‰∏äÂ∞Ü‰∏ÄËá≥‰∫îÊ°£Âç∑ÁÉüÁªü‰∏ÄÂàíÂàÜ‰∏∫12‰∏™‰ª∑‰ΩçÊÆµ„ÄÇÈô§Êñ∞ÂìÅ„ÄÅÁ¥ß‰øèÁÉü„ÄÅÈõ™ËåÑÁÉü„ÄÅÂõΩ‰∫ßÊ∑∑ÂêàÂûãÂç∑ÁÉü„ÄÅËøõÂè£ÁÉü‰ª•Âèä‰∏Ä‰∫õÁâπÊÆäÂïÜÂìÅÂ§ñÔºå‰∏ÄËá≥‰∫îÊ°£ÊâÄÊúâÂç∑ÁÉüËßÑÊ†ºÂùáÁ∫≥ÂÖ•Êåâ‰ª∑‰ΩçÊÆµËá™ÈÄâÊäïÊîæ„ÄÇ",
                progress: 50
            },
            6: {
                title: "‰∏é‰º†ÁªüËÆ¢Ë¥ßÂå∫Âà´",
                content: `
                    <div class="story-text">
                        <p><strong>‰º†ÁªüÁöÑÊåâÊ°£‰ΩçÊäïÊîæÔºö</strong>ÊòØÂÖ∑‰ΩìËÆæÁΩÆÊüê‰∏™ÂìÅËßÑÁöÑËÆ¢Ë¥≠Èáè‰∏äÈôê„ÄÇ</p>
                        <div class="quote">üü§ ‰æãÂ¶ÇÔºöÁéâÊ∫™(ËΩØ)5Êù°„ÄÅÁéâÊ∫™(Á°¨)5Êù°„ÄÅËäôËìâÁéã(Á°¨)5Êù°Á≠â„ÄÇ</div>
                        
                        <p><strong>Êåâ‰ª∑‰ΩçÊÆµËá™ÈÄâÊäïÊîæÔºö</strong>Â∞Ü‰ª∑Ê†ºÁõ∏ËøëÁöÑÂç∑ÁÉüÊîæÂú®‰∏ÄËµ∑‰Ωú‰∏∫‰∏Ä‰∏™‰ª∑‰ΩçÊÆµÂå∫Èó¥ÔºåËÆ¢Ë¥ßÊó∂ÔºåÂêå‰∏Ä‰∏™‰ª∑‰ΩçÊÆµÂå∫Èó¥ÂÜÖÁöÑÂêÑËßÑÊ†ºÔºåÈô§‰∫ÜÊúâÂêÑËá™ÁöÑËÆ¢Ë¥≠Êï∞ÈáèÈôêÂà∂ÔºåÊÄªËÆ¢Ë¥≠Êï∞ÈáèËøòÈúÄÊéßÂà∂Âú®ËØ•‰ª∑‰ΩçÊÆµÁöÑÂèØËÆ¢Ë¥≠ÊÄªÈáè‰ª•ÂÜÖ„ÄÇ</p>
                        <div class="quote">üü§ ‰æãÂ¶ÇÔºöÂ∞ÜÁéâÊ∫™(ËΩØ)„ÄÅÁéâÊ∫™(Á°¨)„ÄÅËäôËìâÁéã(Á°¨)‰Ωú‰∏∫‰∏Ä‰∏™‰ª∑‰ΩçÊÆµÁªÑÂêàÔºåÂçï‰∏™ÂìÅËßÑËÆ¢Ë¥≠‰∏çË∂ÖËøá5Êù°Ôºå‰∏îËøô3‰∏™ÂìÅËßÑÂêàËÆ°ÊúÄÂ§öÂèØËÆ¢Ë¥≠10Êù°ÔºåÂÆ¢Êà∑ÂèØËá™Áî±ÈÄâÊã©ÊâÄÈúÄÂìÅËßÑ‚Äî‚Äî3Êù°ÁéâÊ∫™(ËΩØ)„ÄÅ3Êù°ÁéâÊ∫™(Á°¨)„ÄÅ4Êù°ËäôËìâÁéã(Á°¨)Á≠â‰ªªÊÑèÁªÑÂêà„ÄÇ</div>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(7)">
                            ‰ª∑‰ΩçÊÆµËá™ÈÄâËÆ¢Ë¥≠ÊÄé‰πàÊìç‰Ωú
                        </button>
                    </div>
                `,
                speechText: "‰º†ÁªüÁöÑÊåâÊ°£‰ΩçÊäïÊîæÊòØÂÖ∑‰ΩìËÆæÁΩÆÊüê‰∏™ÂìÅËßÑÁöÑËÆ¢Ë¥≠Èáè‰∏äÈôê„ÄÇ‰æãÂ¶ÇÔºöÁéâÊ∫™ËΩØ5Êù°„ÄÅÁéâÊ∫™Á°¨5Êù°„ÄÅËäôËìâÁéãÁ°¨5Êù°Á≠â„ÄÇÊåâ‰ª∑‰ΩçÊÆµËá™ÈÄâÊäïÊîæÊòØÂ∞Ü‰ª∑Ê†ºÁõ∏ËøëÁöÑÂç∑ÁÉüÊîæÂú®‰∏ÄËµ∑‰Ωú‰∏∫‰∏Ä‰∏™‰ª∑‰ΩçÊÆµÂå∫Èó¥ÔºåËÆ¢Ë¥ßÊó∂ÔºåÂêå‰∏Ä‰∏™‰ª∑‰ΩçÊÆµÂå∫Èó¥ÂÜÖÁöÑÂêÑËßÑÊ†ºÔºåÈô§‰∫ÜÊúâÂêÑËá™ÁöÑËÆ¢Ë¥≠Êï∞ÈáèÈôêÂà∂ÔºåÊÄªËÆ¢Ë¥≠Êï∞ÈáèËøòÈúÄÊéßÂà∂Âú®ËØ•‰ª∑‰ΩçÊÆµÁöÑÂèØËÆ¢Ë¥≠ÊÄªÈáè‰ª•ÂÜÖ„ÄÇ‰æãÂ¶ÇÔºöÂ∞ÜÁéâÊ∫™ËΩØ„ÄÅÁéâÊ∫™Á°¨„ÄÅËäôËìâÁéãÁ°¨‰Ωú‰∏∫‰∏Ä‰∏™‰ª∑‰ΩçÊÆµÁªÑÂêàÔºåÂçï‰∏™ÂìÅËßÑËÆ¢Ë¥≠‰∏çË∂ÖËøá5Êù°Ôºå‰∏îËøô3‰∏™ÂìÅËßÑÂêàËÆ°ÊúÄÂ§öÂèØËÆ¢Ë¥≠10Êù°ÔºåÂÆ¢Êà∑ÂèØËá™Áî±ÈÄâÊã©ÊâÄÈúÄÂìÅËßÑ‚Äî‚Äî3Êù°ÁéâÊ∫™ËΩØ„ÄÅ3Êù°ÁéâÊ∫™Á°¨„ÄÅ4Êù°ËäôËìâÁéãÁ°¨Á≠â‰ªªÊÑèÁªÑÂêà„ÄÇ",
                progress: 60
            },
            7: {
                title: "‰ª∑‰ΩçÊÆµËá™ÈÄâÊìç‰ΩúÊ≠•È™§",
                content: `
                    <div class="steps">
                        <div class="step">
                            <span class="step-number">1</span>
                            <strong>Á≠õÈÄâÈîÅÂÆöÔºö</strong>ÂÖàÁÇπÂáªÊºèÊñóÁä∂ÂõæÊ†áÈÄâÊã©Ôºö‰ªÖÊòæÁ§∫ÂèØËÆ¢Ë¥≠Âç∑ÁÉüÔºåËøôÊ†∑ÁïåÈù¢‰∏äÂ∞±Âè™ÊòæÁ§∫ÊÇ®ÂΩìÂâçÊúâËµÑÊ†ºËÆ¢Ë¥≠ÁöÑÂìÅËßÑ„ÄÇ
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <strong>ÊåâÊÆµÊü•ÁúãÔºö</strong>‰ªéÁ¨¨1‰ª∑‰ΩçÊÆµÂºÄÂßãÈ°∫Â∫èÊü•Áúã„ÄÇÁõ¥Êé•Âú®Ëøô‰∏™Êï∞Â≠óÊ°ÜÂÜÖËæìÂÖ•ÊÇ®ÊÉ≥Ë¶ÅÁöÑËÆ¢Ë¥≠ÈáèÔºà‰∏çËÉΩË∂ÖËøáÊòæÁ§∫ÁöÑÊï∞Â≠óÔºâ„ÄÇÂêàÁêÜËÆ¢ÈáèÂêéÈù¢ÊòæÁ§∫ÁöÑÊï∞Â≠óÔºåÂ∞±ÊòØÂΩìÂâçÂèØËÆ¢ÁöÑÊúÄÂ§ßÊï∞Èáè„ÄÇ
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <strong>Ê†∏ÂØπÊÄªÈáèÔºö</strong>ÊâÄÊúâÂìÅËßÑÈÄâÂÆåÂêéÔºåÊ£ÄÊü•"ÂêàÁêÜÂÆöÈáè"ÊÄªÈ¢ùÊòØÂê¶Á≠â‰∫é"ËÆ¢Ë¥≠Èáè"ÊÄªÈ¢ù„ÄÇÂ¶ÇÊûú‰∏çÁ≠âÔºåËØ¥ÊòéÊúâÂìÅËßÑÊï∞ÈáèÊú™ËæìÂÖ•ÊàñËæìÂÖ•ÊúâËØØÔºåËØ∑ËøîÂõûÊ†∏ÂØπ„ÄÇ
                        </div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <strong>Ë°•ÂÖ®Â∏∏ËßÑÂìÅËßÑÔºö</strong>ÈáçË¶ÅÊèêÈÜíÔºöÂÆåÊàê"‰ª∑‰ΩçÊÆµËá™ÈÄâ"ÂêéÔºå‰∏çË¶ÅÂøòËÆ∞ËøòÊúâÁ≥ªÁªüÊ†πÊçÆÊÇ®ÁöÑÊ°£‰ΩçÁõ¥Êé•‰∏∫ÊÇ®ÂåπÈÖçÁöÑ"ÊåâÊ°£‰ΩçÊäïÊîæ"ÁöÑÂìÅËßÑ„ÄÇÊ£ÄÊü•Â∏∏ËßÑËÆ¢Ë¥≠Âå∫Ôºå‰∏ÄÂπ∂Âä†ÂÖ•ËÆ¢ÂçïÔºåÁ°Æ‰øùË¥ßÊ∫êÈΩêÂÖ®„ÄÇ
                        </div>
                    </div>
                    
                    <div class="story-text">
                        <div class="quote" style="text-align: center; color: #4caf50;">"ÊØî‰º†ÁªüÊñπÂºèÂø´Â§ö‰∫ÜÔºÅ"</div>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn green" onclick="showScene(11)">
                            ÂºÄÂßã‰ΩìÈ™å
                        </button>
                    </div>
                `,
                speechText: "‰ª∑‰ΩçÊÆµËá™ÈÄâÊìç‰ΩúÊ≠•È™§ÔºöÁ¨¨‰∏ÄÊ≠•ÔºåÁ≠õÈÄâÈîÅÂÆöÔºöÂÖàÁÇπÂáªÊºèÊñóÁä∂ÂõæÊ†áÈÄâÊã©Ôºö‰ªÖÊòæÁ§∫ÂèØËÆ¢Ë¥≠Âç∑ÁÉüÔºåËøôÊ†∑ÁïåÈù¢‰∏äÂ∞±Âè™ÊòæÁ§∫ÊÇ®ÂΩìÂâçÊúâËµÑÊ†ºËÆ¢Ë¥≠ÁöÑÂìÅËßÑ„ÄÇÁ¨¨‰∫åÊ≠•ÔºåÊåâÊÆµÊü•ÁúãÔºö‰ªéÁ¨¨1‰ª∑‰ΩçÊÆµÂºÄÂßãÈ°∫Â∫èÊü•Áúã„ÄÇÁõ¥Êé•Âú®Ëøô‰∏™Êï∞Â≠óÊ°ÜÂÜÖËæìÂÖ•ÊÇ®ÊÉ≥Ë¶ÅÁöÑËÆ¢Ë¥≠Èáè„ÄÇÂêàÁêÜËÆ¢ÈáèÂêéÈù¢ÊòæÁ§∫ÁöÑÊï∞Â≠óÔºåÂ∞±ÊòØÂΩìÂâçÂèØËÆ¢ÁöÑÊúÄÂ§ßÊï∞Èáè„ÄÇÁ¨¨‰∏âÊ≠•ÔºåÊ†∏ÂØπÊÄªÈáèÔºöÊâÄÊúâÂìÅËßÑÈÄâÂÆåÂêéÔºåÊ£ÄÊü•ÂêàÁêÜÂÆöÈáèÊÄªÈ¢ùÊòØÂê¶Á≠â‰∫éËÆ¢Ë¥≠ÈáèÊÄªÈ¢ù„ÄÇÂ¶ÇÊûú‰∏çÁ≠âÔºåËØ¥ÊòéÊúâÂìÅËßÑÊï∞ÈáèÊú™ËæìÂÖ•ÊàñËæìÂÖ•ÊúâËØØÔºåËØ∑ËøîÂõûÊ†∏ÂØπ„ÄÇÁ¨¨ÂõõÊ≠•ÔºåË°•ÂÖ®Â∏∏ËßÑÂìÅËßÑÔºöÈáçË¶ÅÊèêÈÜíÔºöÂÆåÊàê‰ª∑‰ΩçÊÆµËá™ÈÄâÂêéÔºå‰∏çË¶ÅÂøòËÆ∞ËøòÊúâÁ≥ªÁªüÊ†πÊçÆÊÇ®ÁöÑÊ°£‰ΩçÁõ¥Êé•‰∏∫ÊÇ®ÂåπÈÖçÁöÑÊåâÊ°£‰ΩçÊäïÊîæÁöÑÂìÅËßÑ„ÄÇÊ£ÄÊü•Â∏∏ËßÑËÆ¢Ë¥≠Âå∫Ôºå‰∏ÄÂπ∂Âä†ÂÖ•ËÆ¢ÂçïÔºåÁ°Æ‰øùË¥ßÊ∫êÈΩêÂÖ®„ÄÇÊØî‰º†ÁªüÊñπÂºèÂø´Â§ö‰∫ÜÔºÅ",
                progress: 70
            },
            8: {
                title: "‰º†ÁªüÊ®°ÂºèÁöÑÂõ∞Êâ∞",
                content: `
                    <div class="story-text">
                        <p>ÁúºËä±Áº≠‰π±Âú∞Âú®‰ºóÂ§öËßÑÊ†º‰∏≠ÂØªÊâæËÉΩËÆ¢ÁöÑ...</p>
                        <p>‰Ω†ÈÄâÊã©‰∫ÜÂæà‰πÖÔºåÊó∂Èó¥‰∏ÄÂàÜ‰∏ÄÁßíËøáÂéªÔºåÊïàÁéáÊûÅ‰Ωé„ÄÇ</p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(9)">
                            ÊúÄÁªàÈÄâÊã©
                        </button>
                    </div>
                `,
                speechText: "ÁúºËä±Áº≠‰π±Âú∞Âú®‰ºóÂ§öËßÑÊ†º‰∏≠ÂØªÊâæËÉΩËÆ¢ÁöÑÔºå‰Ω†ÈÄâÊã©‰∫ÜÂæà‰πÖÔºåÊó∂Èó¥‰∏ÄÂàÜ‰∏ÄÁßíËøáÂéªÔºåÊïàÁéáÊûÅ‰Ωé„ÄÇ",
                progress: 80
            },
            9: {
                title: "‰º†ÁªüÊ®°ÂºèÁöÑÁªìÊûú",
                content: `
                    <div class="story-text">
                        <p>ÂøôÊ¥ª‰∫ÜÂçäÂ§©ÔºåÊÉ≥ËÆ¢ÁöÑÊ≤°ËÆ¢Âà∞Ôºå‰∏çÈúÄË¶ÅÁöÑËÆ¢‰∫Ü‰∏ÄÂ†Ü„ÄÇ</p>
                        <div class="quote" style="color: #f44336;">"ÂîâÔºåÁôΩÁôΩÊµ™Ë¥π‰∫ÜÊó∂Èó¥ÔºÅ"</div>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn red" onclick="showScene(10)">
                            ‚ö´Ô∏è ‰Ω†ÊáäÊÅºÂú∞ÂÖ≥Èó≠Á≥ªÁªü
                        </button>
                        <button class="choice-btn green" onclick="showScene(3)">
                            üü¢ Â≠¶‰π†Êñ∞ÊñπÊ≥ï
                        </button>
                    </div>
                `,
                speechText: "ÂøôÊ¥ª‰∫ÜÂçäÂ§©ÔºåÊÉ≥ËÆ¢ÁöÑÊ≤°ËÆ¢Âà∞Ôºå‰∏çÈúÄË¶ÅÁöÑËÆ¢‰∫Ü‰∏ÄÂ†Ü„ÄÇÂîâÔºåÁôΩÁôΩÊµ™Ë¥π‰∫ÜÊó∂Èó¥ÔºÅ",
                progress: 90
            },
            10: {
                title: "ÊáäÊÅºÁöÑÁªìÊûú",
                content: `
                    <div class="story-text">
                        <div class="quote" style="text-align: center; color: #f44336; font-size: 1.2rem;">
                            ‰º†ÁªüËÆ¢Ë¥ßÊñπÂºèÊïàÁéá‰Ωé‰∏ãÔºåÊµ™Ë¥π‰∫ÜÂ§ßÈáèÊó∂Èó¥Âç¥Ê≤°ÊúâÂæóÂà∞Êª°ÊÑèÁöÑÁªìÊûú„ÄÇ
                        </div>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn green" onclick="showScene(1)">
                            ÈáçÊñ∞ÂºÄÂßã
                        </button>
                    </div>
                `,
                speechText: "‰º†ÁªüËÆ¢Ë¥ßÊñπÂºèÊïàÁéá‰Ωé‰∏ãÔºåÊµ™Ë¥π‰∫ÜÂ§ßÈáèÊó∂Èó¥Âç¥Ê≤°ÊúâÂæóÂà∞Êª°ÊÑèÁöÑÁªìÊûú„ÄÇ",
                progress: 100
            },
            11: {
                title: "‰ΩìÈ™åÊñ∞ÊñπÊ≥ï",
                content: `
                    <div class="story-text">
                        <p>‰Ω†Â∞ùËØïÊñ∞ÊñπÊ≥ïÔºö</p>
                        <p>Á≠õÈÄâÂèØËÆ¢Ë¥≠Âç∑ÁÉü ‚Üí Âø´ÈÄüÊâæÂà∞Á¨¶ÂêàÊ°£‰ΩçÁöÑÂìÅÁâå ‚Üí Á≤æÂáÜÊª°Ë∂≥ËÆ¢Ë¥ßÈúÄÊ±ÇÔºÅ</p>
                        <div class="quote" style="color: #4caf50;">"ËøôÊâçÊòØÊô∫ËÉΩËÆ¢Ë¥ßÔºÅÁúÅÊó∂ÁúÅÂäõËøòÂáÜÁ°ÆÔºÅ"</div>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn green" onclick="showScene(12)">
                            Êª°ÊÑèÊî∂Ë¥ß
                        </button>
                    </div>
                `,
                speechText: "‰Ω†Â∞ùËØïÊñ∞ÊñπÊ≥ïÔºöÁ≠õÈÄâÂèØËÆ¢Ë¥≠Âç∑ÁÉüÔºåÂø´ÈÄüÊâæÂà∞Á¨¶ÂêàÊ°£‰ΩçÁöÑÂìÅÁâåÔºåÁ≤æÂáÜÊª°Ë∂≥ËÆ¢Ë¥ßÈúÄÊ±ÇÔºÅËøôÊâçÊòØÊô∫ËÉΩËÆ¢Ë¥ßÔºÅÁúÅÊó∂ÁúÅÂäõËøòÂáÜÁ°ÆÔºÅ",
                progress: 90
            },
            12: {
                title: "Êª°ÊÑèÊî∂Ë¥ß",
                content: `
                    <div class="story-text">
                        <div class="quote" style="text-align: center; color: #4caf50; font-size: 1.2rem;">
                            ËÆ¢Ë¥ßÂáÜÁ°ÆÈÄÅËææÔºåÈÉΩÊòØ‰Ω†ÈúÄË¶ÅÁöÑËßÑÊ†º„ÄÇ
                        </div>
                        <p style="text-align: center; font-weight: bold; margin-top: 20px;">
                            ‰ª∑‰ΩçÊÆµËá™ÈÄâËÆ©ËÆ¢Ë¥ßÂèòÂæóÊõ¥ÁÆÄÂçï„ÄÅÊõ¥È´òÊïàÔºÅ
                        </p>
                    </div>
                    
                    <div class="choices">
                        <button class="choice-btn blue" onclick="showScene(1)">
                            ÈáçÊñ∞ÂºÄÂßã
                        </button>
                    </div>
                `,
                speechText: "ËÆ¢Ë¥ßÂáÜÁ°ÆÈÄÅËææÔºåÈÉΩÊòØ‰Ω†ÈúÄË¶ÅÁöÑËßÑÊ†º„ÄÇ‰ª∑‰ΩçÊÆµËá™ÈÄâËÆ©ËÆ¢Ë¥ßÂèòÂæóÊõ¥ÁÆÄÂçï„ÄÅÊõ¥È´òÊïàÔºÅ",
                progress: 100
            }
        };

        // ËØ≠Èü≥ÊúóËØªÂäüËÉΩ
        function speakText(text) {
            // ÂÅúÊ≠¢ÂΩìÂâçËØ≠Èü≥
            stopSpeech();
            
            // ÂàõÂª∫Êñ∞ÁöÑËØ≠Èü≥ÂØπË±°
            currentUtterance = new SpeechSynthesisUtterance(text);
            
            // ËÆæÁΩÆËØ≠Èü≥ÂèÇÊï∞
            currentUtterance.lang = 'zh-CN';
            currentUtterance.rate = 0.9; // ËØ≠ÈÄü
            currentUtterance.pitch = 1; // Èü≥Ë∞É
            currentUtterance.volume = 1; // Èü≥Èáè
            
            // ÊòæÁ§∫ËØ≠Èü≥Êí≠ÊîæÊåáÁ§∫Âô®
            document.getElementById('speechIndicator').classList.add('active');
            
            // ËØ≠Èü≥ÁªìÊùüÊó∂ÁöÑÂõûË∞É
            currentUtterance.onend = function() {
                document.getElementById('speechIndicator').classList.remove('active');
                document.getElementById('playVoice').classList.remove('active');
            };
            
            // ËØ≠Èü≥ÈîôËØØÊó∂ÁöÑÂõûË∞É
            currentUtterance.onerror = function() {
                document.getElementById('speechIndicator').classList.remove('active');
                document.getElementById('playVoice').classList.remove('active');
                alert('ËØ≠Èü≥Êí≠ÊîæÂá∫Áé∞ÈîôËØØÔºåËØ∑Ê£ÄÊü•ÊµèËßàÂô®ËÆæÁΩÆÊàñÂ∞ùËØï‰ΩøÁî®ÂÖ∂‰ªñÊµèËßàÂô®„ÄÇ');
            };
            
            // ÂºÄÂßãËØ≠Èü≥ÂêàÊàê
            speechSynthesis.speak(currentUtterance);
            document.getElementById('playVoice').classList.add('active');
        }
        
        // ÂÅúÊ≠¢ËØ≠Èü≥
        function stopSpeech() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                document.getElementById('speechIndicator').classList.remove('active');
                document.getElementById('playVoice').classList.remove('active');
            }
        }
        
        // ÊòæÁ§∫Âú∫ÊôØÂáΩÊï∞
        function showScene(sceneId) {
            const scene = scenes[sceneId];
            if (!scene) return;
            
            const contentElement = document.getElementById('story-content');
            contentElement.innerHTML = `
                <h2 style="margin-bottom: 20px; color: #4fc3f7; text-align: center;">${scene.title}</h2>
                ${scene.content}
                <div class="auto-play-toggle">
                    <span>Ëá™Âä®Êí≠ÊîæËØ≠Èü≥</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoPlayToggle" ${autoPlayEnabled ? 'checked' : ''}>
                        <span class="slider"></span>
                    </label>
                </div>
            `;
            
            // Êõ¥Êñ∞ËøõÂ∫¶Êù°
            document.getElementById('progress').style.width = `${scene.progress}%`;
            
            // Ê∑ªÂä†Ê∑°ÂÖ•Âä®Áîª
            contentElement.classList.remove('fade-in');
            void contentElement.offsetWidth; // Ëß¶ÂèëÈáçÁªò
            contentElement.classList.add('fade-in');
            
            // ÊªöÂä®Âà∞È°∂ÈÉ®
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Â¶ÇÊûúÂêØÁî®‰∫ÜËá™Âä®Êí≠ÊîæÔºåÂàôËá™Âä®ÊúóËØª
            if (autoPlayEnabled) {
                setTimeout(() => {
                    speakText(scene.speechText);
                }, 500);
            }
            
            // ÁªëÂÆöËá™Âä®Êí≠ÊîæÂàáÊç¢‰∫ã‰ª∂
            document.getElementById('autoPlayToggle').addEventListener('change', function() {
                autoPlayEnabled = this.checked;
            });
        }

        // ÂàùÂßãÂåñÈ°µÈù¢
        document.addEventListener('DOMContentLoaded', function() {
            // ËÆæÁΩÆÂàùÂßãÂú∫ÊôØ
            showScene(1);
            
            // ËØ≠Èü≥ÊéßÂà∂ÊåâÈíÆ‰∫ã‰ª∂
            document.getElementById('playVoice').addEventListener('click', function() {
                const currentSceneId = Object.keys(scenes).find(key => scenes[key].progress === parseInt(document.getElementById('progress').style.width));
                if (currentSceneId) {
                    speakText(scenes[currentSceneId].speechText);
                }
            });
            
            document.getElementById('stopVoice').addEventListener('click', function() {
                stopSpeech();
            });
        });
    </script>
</body>
</html>
